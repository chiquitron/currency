sudo: required

services:
   - docker	
   
env:
  global:
    - REGISTRY: registry.blackwoodseven.com
    - IMAGENAME: $REGISTRY/$TRAVIS_REPO_SLUG
    - TAG_VERSION: $TRAVIS_BRANCH.$TRAVIS_BUILD_NUMBER
    - TAG_LATEST: latest

script:
  - docker-machine -v
  - docker-compose -v
  - echo $DOCKER_HOST
  - echo $DOCKER_CERT_PATH
  - docker build --pull=true -t $IMAGENAME:$TAG_VERSION .
  - docker tag --force=true $IMAGENAME:$TAG_VERSION $IMAGENAME:$TAG_LATEST
  - docker push $IMAGENAME:$TAG_VERSION
  - docker push $IMAGENAME:$TAG_LATEST
